<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¤–å…¬çš„é‡‘ç‰Œå¨æˆ¿</title>
    <style>
        /* --- å…¨å±€è¶…å¤§å·ä¼˜åŒ– --- */
        :root {
            --bg-color: #FFF3E0; /* æš–æ©™è‰²èƒŒæ™¯ */
            --card-color: #FFFFFF;
            --primary-color: #FF6F00; /* æµ“éƒçš„æ©™çº¢è‰² */
            --success-color: #2E7D32;
            --btn-text: #FFFFFF;
        }

        body {
            font-family: -apple-system, "Microsoft YaHei", sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            -webkit-user-select: none; /* ç¦æ­¢é€‰ä¸­æ–‡å­— */
            user-select: none;
        }

        h1 {
            font-size: 3rem; /* ç‰¹å¤§æ ‡é¢˜ */
            color: #D84315;
            margin: 10px 0;
            text-shadow: 2px 2px 0px #FFE0B2;
        }

        p.subtitle {
            font-size: 1.6rem;
            color: #795548;
            margin-bottom: 20px;
        }

        /* --- æ¸¸æˆä¸»ç•Œé¢ --- */
        #game-container {
            background-color: var(--card-color);
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 95%;
            max-width: 600px;
            text-align: center;
            border: 5px solid #FFECB3;
        }

        /* --- ç›®æ ‡æ  --- */
        .dish-card {
            background-color: #FFF8E1;
            border: 3px dashed #FFB74D;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .dish-card h2 {
            font-size: 2.8rem; /* èœåå·¨å¤§ */
            color: #E65100;
            margin: 10px 0;
        }
        
        .dish-card p {
            font-size: 1.5rem;
            color: #6D4C41;
            margin: 0;
        }

        /* --- å¤§é”…åŒºåŸŸ --- */
        .pot-container {
            position: relative;
            margin: 20px auto;
            width: 200px;
            height: 200px;
            background-color: #CFD8DC;
            border-radius: 50%;
            border: 8px solid #546E7A;
            display: flex;
            justify-content: center;
            align-items: center;
            /* é”…çš„æ‰‹æŸ„è£…é¥° */
            box-shadow: inset 10px 10px 20px rgba(0,0,0,0.1);
        }
        
        .pot-container::before, .pot-container::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40px;
            height: 15px;
            background-color: #37474F;
            transform: translateY(-50%);
        }
        .pot-container::before { left: -45px; border-radius: 10px 0 0 10px; }
        .pot-container::after { right: -45px; border-radius: 0 10px 10px 0; }

        /* é”…é‡Œçš„é£Ÿæ */
        .pot-content {
            font-size: 5rem; /* é”…é‡Œçš„ä¸œè¥¿è¦éå¸¸å¤§ */
            line-height: 1;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            z-index: 2;
        }

        .pot-item {
            animation: bounceIn 0.5s;
            cursor: pointer;
        }

        /* --- é£Ÿææ¶ --- */
        .shelf-label {
            font-size: 1.5rem;
            margin-top: 20px;
            margin-bottom: 15px;
            display: block;
            font-weight: bold;
            color: #5D4037;
        }

        .ingredients-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* ä¸€è¡Œ3ä¸ªï¼Œä¿è¯å¤§ */
            gap: 15px;
            margin-bottom: 30px;
        }

        .food-btn {
            background-color: #fff;
            border: 3px solid #FFCC80;
            border-radius: 20px;
            height: 100px; /* æŒ‰é’®é«˜åº¦å›ºå®š */
            font-size: 4rem; /* å›¾æ ‡å·¨å¤§ */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 0 #FFB74D;
            transition: transform 0.1s;
        }

        .food-btn:active {
            transform: translateY(5px);
            box-shadow: none;
        }

        .food-btn.used {
            opacity: 0.3;
            background-color: #eee;
            border-color: #ccc;
            box-shadow: none;
        }

        /* --- è¯„ä»·æ–‡å­— --- */
        #feedback-area {
            min-height: 80px;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #message {
            font-size: 2rem; /* è¯„ä»·æ–‡å­—å¤§ */
            font-weight: bold;
            line-height: 1.4;
        }

        .msg-good { color: #2E7D32; }
        .msg-bad { color: #C62828; }

        /* --- æŒ‰é’® --- */
        #action-btn {
            background-color: var(--primary-color);
            color: white;
            font-size: 2.2rem;
            padding: 20px 0;
            width: 100%;
            border: none;
            border-radius: 50px;
            box-shadow: 0 8px 0 #BF360C;
            cursor: pointer;
            margin-top: 10px;
        }

        #action-btn:active {
            transform: translateY(8px);
            box-shadow: none;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            60% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

<header>
    <h1>ğŸ‘¨â€ğŸ³ å¤–å…¬çš„é‡‘ç‰Œå¨æˆ¿</h1>
    <p class="subtitle">ä»Šå¤©è¦æ‹›å¾…å…¨å®¶äººï¼Œçœ‹æ‚¨çš„å•¦ï¼</p>
</header>

<div id="game-container">
    
    <div class="dish-card">
        <p>ç¬¬ <span id="level-num">1</span> é“èœï¼š</p>
        <h2 id="target-dish">???</h2>
        <p id="hint-text" style="font-size:1.3rem; color:#888;">(æç¤º)</p>
    </div>

    <div class="pot-container" onclick="clearPot()">
        <div class="pot-content" id="pot-display"></div>
    </div>
    <p style="color:#999; font-size:1.2rem;">(ç‚¹é”™çš„é£Ÿæï¼Œç‚¹ä¸€ä¸‹é”…å°±èƒ½æ‹¿å‡ºæ¥)</p>

    <div id="feedback-area">
        <div id="message"></div>
    </div>

    <span class="shelf-label">ğŸ‘‡ è¯·é€‰æ‹© 2 æ ·é£Ÿæä¸‹é”…ï¼š</span>
    <div class="ingredients-grid" id="food-shelf">
        </div>

    <button id="action-btn" onclick="checkCooking()">ğŸ”¥ å¼€ç«ï¼</button>
</div>

<script>
    // --- å‡çº§ç‰ˆèœè°±æ•°æ® ---
    // hint: ç»™å¤–å…¬çš„ä¸€ç‚¹æç¤º
    // correctIngredients: æ­£ç¡®çš„é…æ–¹
    // comment: åšå¯¹äº†ä¹‹åçš„å…·ä½“è¯„ä»·
    // pool: è¿™å…³æä¾›çš„å¤‡é€‰é£Ÿæ
    const levels = [
        {
            name: "é•¿å¯¿é¢",
            hint: "è¿‡ç”Ÿæ—¥éƒ½è¦åƒè¿™ä¸ªï¼è¦æœ‰é¢æ¡å’Œé¸¡è›‹ã€‚",
            correct: ["ğŸœ", "ğŸ¥š"], 
            comment: "ğŸœ å“‡ï¼è¿™é¢æ¡çœŸåŠ²é“ï¼ç¥å¤–å…¬ç¦å¦‚ä¸œæµ·ï¼Œå¯¿æ¯”å—å±±ï¼",
            pool: ["ğŸœ", "ğŸ¥©", "ğŸ¥š", "ğŸŒ¶ï¸", "ğŸ¬", "ğŸ¥¦"]
        },
        {
            name: "çº¢çƒ§è‚‰",
            hint: "è¦é€‰å¤§å—è‚‰ï¼Œè¿˜è¦æ”¾ç³–æé²œå“¦ã€‚",
            correct: ["ğŸ¥©", "ğŸ¬"],
            comment: "ğŸ¥© å¤ªé¦™äº†ï¼è‚¥è€Œä¸è…»ï¼Œå…¥å£å³åŒ–ï¼Œè¿™æ‰‹è‰ºç»äº†ï¼",
            pool: ["ğŸ¥©", "ğŸ¬", "ğŸ§‚", "ğŸŸ", "ğŸ‹", "ğŸ†"]
        },
        {
            name: "å°è‘±æ‹Œè±†è…",
            hint: "ä¸€æ¸…äºŒç™½ï¼Œæ¸…æ¸…çˆ½çˆ½ã€‚",
            correct: ["â¬œ", "ğŸŒ¿"], // ç™½è±†è…+è‘±
            comment: "ğŸŒ¿ è¿™ç§æ¸…æ·¡çš„å°èœæœ€å…»ç”Ÿäº†ï¼Œå‘³é“åˆšåˆšå¥½ï¼",
            pool: ["â¬œ", "ğŸ¥©", "ğŸŒ¿", "ğŸŒ¶ï¸", "ğŸœ", "ğŸ¥š"]
        },
        {
            name: "è€æ¯é¸¡æ±¤",
            hint: "å¾ˆè¡¥èº«ä½“çš„ï¼ŒåŠ ç‚¹è˜‘è‡æ›´é²œã€‚",
            correct: ["ğŸ”", "ğŸ„"],
            comment: "ğŸ¥£ å–ä¸€å£æš–åˆ°å¿ƒé‡Œå»äº†ï¼ŒçœŸé²œå•Šï¼",
            pool: ["ğŸ”", "ğŸ„", "ğŸ¬", "ğŸŒ¶ï¸", "ğŸŸ", "ğŸ¥’"]
        },
        {
            name: "æ¸…è’¸é²ˆé±¼",
            hint: "é±¼è¦æ–°é²œï¼ŒåŠ ç‚¹è‘±å§œå»è…¥ã€‚",
            correct: ["ğŸŸ", "ğŸŒ¿"],
            comment: "ğŸŸ ç«å€™æŒæ¡å¾—çœŸå¥½ï¼Œé±¼è‚‰å¥½å«©ï¼Œä¸€ç‚¹ä¹Ÿä¸è…¥ï¼",
            pool: ["ğŸŸ", "ğŸŒ¿", "ğŸ¥©", "ğŸ¬", "ğŸ„", "ğŸ”"]
        },
        {
            name: "å¤–å…¬çš„ç‰¹åˆ¶èŒ¶",
            hint: "é¥­åå–ä¸€æ¯ï¼Œæ¶ˆé£Ÿè§£è…»ã€‚åŠ ç‰‡æŸ æª¬ï¼Ÿ",
            correct: ["ğŸµ", "ğŸ‹"],
            comment: "ğŸµ å—¯~ èŒ¶é¦™æµ“éƒï¼ŒåŠ äº†æŸ æª¬æ›´å¥½å–äº†ï¼",
            pool: ["ğŸµ", "ğŸ‹", "ğŸŒ¶ï¸", "ğŸ§‚", "ğŸ¥©", "ğŸœ"]
        }
    ];

    let currentIdx = 0;
    let myPot = []; // é”…é‡Œçš„ä¸œè¥¿
    let isFinished = false; // å½“å‰å…³å¡æ˜¯å¦å·²å®Œæˆ

    function initLevel() {
        if (currentIdx >= levels.length) {
            showFinalWin();
            return;
        }

        const data = levels[currentIdx];
        myPot = [];
        isFinished = false;
        
        // æ›´æ–°ç•Œé¢æ–‡å­—
        document.getElementById('level-num').innerText = currentIdx + 1;
        document.getElementById('target-dish').innerText = data.name;
        document.getElementById('hint-text').innerText = "(" + data.hint + ")";
        document.getElementById('message').innerText = "è¯·é€‰ 2 ä¸ªé£Ÿææ”¾è¿›é”…é‡Œ";
        document.getElementById('message').className = "";
        
        document.getElementById('action-btn').innerText = "ğŸ”¥ å¼€ç«ï¼";
        document.getElementById('action-btn').style.backgroundColor = "#FF6F00";
        document.getElementById('action-btn').disabled = false;

        renderPot();
        renderShelf(data.pool);
    }

    function renderShelf(pool) {
        const shelf = document.getElementById('food-shelf');
        shelf.innerHTML = "";
        
        // ç®€å•æ‰“ä¹±
        let items = [...pool].sort(() => Math.random() - 0.5);

        items.forEach(item => {
            const btn = document.createElement('div');
            btn.className = "food-btn";
            btn.innerText = item;
            btn.onclick = () => addToPot(item, btn);
            shelf.appendChild(btn);
        });
    }

    function addToPot(item, btn) {
        if (isFinished) return;
        if (myPot.length >= 2) {
            showMessage("é”…é‡Œè£…ä¸ä¸‹äº†ï¼Œå…ˆç‚¹ä¸€ä¸‹é”…æŠŠèœæ‹¿å‡ºæ¥ã€‚", "bad");
            return;
        }
        if (myPot.includes(item)) return;

        myPot.push(item);
        btn.classList.add("used");
        renderPot();
        showMessage("", ""); // æ¸…ç©ºé”™è¯¯æç¤º
    }

    function clearPot() {
        if (isFinished) return;
        // æŠŠé”…æ¸…ç©ºï¼Œæ¢å¤ä¸‹æ–¹æŒ‰é’®
        myPot = [];
        const btns = document.querySelectorAll('.food-btn');
        btns.forEach(b => b.classList.remove('used'));
        renderPot();
        showMessage("é”…æ¸…ç©ºäº†ï¼Œé‡æ–°é€‰å§ã€‚", "");
    }

    function renderPot() {
        const display = document.getElementById('pot-display');
        display.innerHTML = "";
        myPot.forEach(item => {
            const span = document.createElement('span');
            span.className = "pot-item";
            span.innerText = item;
            display.appendChild(span);
        });
    }

    function checkCooking() {
        if (isFinished) {
            // å¦‚æœå·²ç»å®Œæˆäº†ï¼Œç‚¹å‡»å°±æ˜¯ä¸‹ä¸€å…³
            currentIdx++;
            initLevel();
            return;
        }

        if (myPot.length < 2) {
            showMessage("é£Ÿæä¸å¤Ÿå‘€ï¼Œè‡³å°‘æ”¾ 2 æ ·ã€‚", "bad");
            return;
        }

        const data = levels[currentIdx];
        // æ’åºå¯¹æ¯”ï¼Œç¡®ä¿ ["A", "B"] å’Œ ["B", "A"] æ˜¯ä¸€æ ·çš„
        const myStr = [...myPot].sort().join('');
        const correctStr = [...data.correct].sort().join('');

        const btn = document.getElementById('action-btn');

        if (myStr === correctStr) {
            // æˆåŠŸ
            isFinished = true;
            showMessage(data.comment, "good");
            btn.innerText = "åšå¾—å¥½ï¼ä¸‹ä¸€é“èœ â”";
            btn.style.backgroundColor = "#2E7D32"; // å˜ç»¿
        } else {
            // å¤±è´¥ï¼ˆæ ¹æ®åŒ…å«çš„é£Ÿæç»™ä¸åŒæç¤ºï¼Œè¿™é‡Œä¸ºäº†ç®€å•ç»™é€šç”¨è¶£å‘³æç¤ºï¼‰
            if (myPot.includes("ğŸŒ¶ï¸") && !data.correct.includes("ğŸŒ¶ï¸")) {
                showMessage("å’³å’³ï¼å¤ªè¾£äº†ï¼è¿™é“èœä¸è¯¥æ”¾è¾£æ¤’å‘€ã€‚", "bad");
            } else if (myPot.includes("ğŸ¬") && !data.correct.includes("ğŸ¬")) {
                showMessage("å¤ªç”œäº†ï¼Œè¿™é“èœä¸ç”¨æ”¾ç³–å“¦ã€‚", "bad");
            } else {
                showMessage("å‘³é“å¥½åƒä¸å¤ªå¯¹ï¼Ÿå†çœ‹çœ‹æç¤ºï¼Œæ¢ä¸ªé£Ÿæè¯•è¯•ã€‚", "bad");
            }
        }
    }

    function showMessage(text, type) {
        const el = document.getElementById('message');
        el.innerText = text;
        if (type === "good") el.className = "msg-good";
        else if (type === "bad") el.className = "msg-bad";
        else el.className = "";
    }

    function showFinalWin() {
        document.getElementById('game-container').innerHTML = `
            <div style="font-size:6rem;">ğŸ†ğŸ‘¨â€ğŸ³ğŸ‰</div>
            <h2 style="font-size:3rem; color:#E65100;">é‡‘ç‰Œå¤§å¨ï¼</h2>
            <p style="font-size:2rem; margin:30px 0;">å¤–å…¬åšçš„èœå¤ªå¥½åƒäº†ï¼<br>å…¨å®¶äººéƒ½æŠ¢ç€åƒï¼</p>
            <button id="action-btn" onclick="location.reload()">å†åšä¸€æ¡Œï¼</button>
        `;
    }

    // å¼€å§‹
    initLevel();

</script>
</body>
</html>